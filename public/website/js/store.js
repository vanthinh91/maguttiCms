!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=47)}({47:function(t,e,r){t.exports=r(48)},48:function(t,e){var r=".cart-count",n=".cart-total",o=".cart-preview",a="#cart-buttons",c=".cart-item-block",i=".cart-item-add",d=".cart-item-remove",s=".cart-item-quantity",u=".cart-item-total",l=".order-preview",f=".order-products-cost",p=".order-shipping-cost",m=".order-discount",y=".order-vat-cost",v=".order-total-cost",g="#order-discount-input",x="#order-discount-alert";window.Store=function(){function t(t){var e=t.toFixed(StoreConfig.decimals).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,StoreConfig.thousands_separator),formatted_price=e.join(StoreConfig.decimal_separator),StoreConfig.prepend_currency&&(formatted_price=StoreConfig.currency_symbol+" "+formatted_price),StoreConfig.append_currency&&(formatted_price+=" "+config("maguttiCms.store.currency_symbol")),formatted_price}function e(){var e=0;$(c).each(function(){var r=$(this),n=r.data("price")*r.find(s).first().val();r.find(u).first().text(t(n)),e+=n}),$(n).text(t(e))}function h(){var e=$("#order-cart").val(),r=$("#order-billing-address").val(),n=$("#order-shipping-address").val(),o=$(g).val();$.ajax({type:"GET",url:"/api/store/order-calc",data:{cart:e,address:n||r,discount_code:o,_token:$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(e){$(f).text(t(e.products)),$(p).text(t(e.shipping)),$(m).text(t(e.discount)),$(y).text(t(e.vat)),$(v).text(t(e.total))},error:function(t){}})}function _(){$(g).on("keyup",function(){!function(t){$.ajax({url:"/api/store/order-discount",type:"GET",dataType:"json",data:{code:t,_token:$('meta[name="csrf-token"]').attr("content")}}).fail(function(){$(x).hide()}).done(function(t){$(x).show(),t.valid?$(x).find(".alert").removeClass("alert-danger").addClass("alert-success").text(t.message):$(x).find(".alert").removeClass("alert-success").addClass("alert-danger").text(t.message)})}($(this).val())})}return{init:function(){$(document).on("change",s,function(){var t=$(this);$(i).data("quantity",Math.max(t.val(),1))}),$(document).on("click",i,function(t){t.preventDefault();var e=$(this),n=e.data("product-code"),o=e.data("product-model-code"),a=e.data("quantity");$.ajax({type:"POST",url:"/api/store/cart-item-add",data:{product_code:n,product_model_code:o,quantity:a,_token:$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(t){$(r).text(t.cart_count),$.each(t.alerts,function(){$.smkAlert({text:this.text,type:this.type,time:this.time})})},error:function(t){$.smkAlert({text:"Error",type:"danger",time:5})}})}),$(document).on("click",d,function(t){t.preventDefault();var n=$(this),o=n.data("id");$.ajax({type:"POST",url:"/api/store/cart-item-remove",data:{id:o,_token:$('meta[name="csrf-token"]').attr("content")},dataType:"json",success:function(t){$(r).text(t.cart_count),n.closest(c).remove(),e(),$(c).length||$(a).remove(),$.each(t.alerts,function(){$.smkAlert({text:this.text,type:this.type,time:this.time})})},error:function(t){$.smkAlert({text:"Error",type:"danger",time:5})}})}),$(o).change(function(){e()}),$(l).change(function(){h()}),$(l).length&&h(),_()}}}()}});